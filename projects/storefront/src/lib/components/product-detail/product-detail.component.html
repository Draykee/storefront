<vsf-collection-breadcrumbs [breadcrumbs]="breadcrumbs"
                            [linkLast]="true"></vsf-collection-breadcrumbs>
<ng-template [ngIf]="product" [ngIfElse]="placeholder">
    <div class="row">
        <div class="col-12 col-md-6 text-center">
            <div class="d-inline-block">
                <div class="card">
                    <img *ngIf="selectedAsset" [src]="selectedAsset?.preview + '?preset=medium'" class="img-fluid">
                    <div class="alt-images">
                        <div *ngFor="let asset of product.assets"
                             class="alt-image"
                             [class.selected]="selectedAsset.id === asset.id"
                             (click)="selectedAsset = asset">
                            <img [src]="asset.preview + '?preset=tiny'">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-12 col-md-6">
            <h2>{{ product.name }}</h2>
            <div class="description">
                {{ product.description }}
            </div>
            <div class="variants">
                <div class="variant-selector" *ngIf="product.variants.length > 1">
                    <select [(ngModel)]="selectedVariant" class="form-control">
                        <option *ngFor="let variant of product.variants" [ngValue]="variant">{{ variant.name }}</option>
                    </select>
                </div>
                <div class="price">
                    {{ selectedVariant?.priceWithTax | formatPrice }}
                </div>
                <div class="qty">
                    <input type="number" min="0" max="99" placeholder="Qty" [(ngModel)]="qty" class="form-control">
                </div>
                <button [disabled]="qty === 0"
                        class="btn btn-primary"
                        (click)="addToCart(selectedVariant, qty)">Add to cart</button>
            </div>
        </div>
    </div>
</ng-template>
<ng-template #placeholder>
    <div class="row">
        <div class="col-12 col-md-6 text-center">
            <div class="card">
                <div class="placeholder-image"></div>
            </div>
        </div>
        <div class="col-12 col-md-6">
            <div class="placeholder-title"></div>
            <div class="placeholder-description"></div>
        </div>
    </div>
</ng-template>
